<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Codenames - Purple Score Edition</title>
    <style>
        :root {
            --bg: #050505;
            --card-default: #1a1a1a;
            --primary: #9d00ff; /* بنفسجي أساسي */
            --team1: #d400ff;    /* فريق بنفسجي فاتح */
            --team2: #4b0082;    /* فريق أرجواني غامق */
            --killer: #ff0000;   /* القاتلة (أحمر للتحذير) */
            --text: #ffffff;
        }
        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'Segoe UI', sans-serif;
            display: flex; flex-direction: column; align-items: center; padding: 20px;
        }
        .scoreboard {
            display: flex; gap: 40px; margin-bottom: 20px; padding: 15px;
            background: #111; border-radius: 15px; border: 1px solid var(--primary);
        }
        .score-box { text-align: center; font-size: 20px; }
        .score-box span { display: block; font-size: 30px; font-weight: bold; color: var(--primary); }
        
        .grid {
            display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px;
            max-width: 900px;
        }
        .card {
            background: var(--card-default); border: 1px solid #333;
            border-radius: 8px; padding: 25px 15px; text-align: center;
            cursor: pointer; transition: 0.3s; font-weight: bold; width: 140px;
        }
        /* كلاسات الألوان المخفية (تظهر عند الضغط أو وضع الجاسوس) */
        .card.team1 { border-color: var(--team1); color: var(--team1); }
        .card.team2 { border-color: var(--team2); color: var(--team2); }
        .card.killer { border-color: var(--killer); color: var(--killer); }
        
        .revealed-t1 { background: var(--team1) !important; color: white !important; }
        .revealed-t2 { background: var(--team2) !important; color: white !important; }
        .revealed-kill { background: var(--killer) !important; color: white !important; }

        .controls { margin-top: 20px; display: flex; gap: 10px; }
        button {
            background: var(--primary); border: none; color: white;
            padding: 10px 25px; border-radius: 8px; cursor: pointer;
        }
        .spy-btn { background: #333; border: 1px solid var(--primary); }
    </style>
</head>
<body>

    <h1>CODENAMES <small style="font-size: 12px;">Purple Edition</small></h1>

    <div class="scoreboard">
        <div class="score-box">نقاط الفريق A<span id="scoreA">0</span></div>
        <div class="score-box">نقاط الفريق B<span id="scoreB">0</span></div>
    </div>

    <div class="grid" id="board"></div>

    <div class="controls">
        <button onclick="initGame()">لعبة جديدة</button>
        <button class="spy-btn" onclick="toggleSpy()">وضع الجاسوس (كشف الألوان)</button>
    </div>

    <script>
        let scoreA = 0; let scoreB = 0;
        let isSpyView = false;
        const words = ["أسد", "موز", "سيارة", "كود", "قمر", "نجمة", "بحر", "طائرة", "قهوة", "جبل", "نهر", "ساعة", "مفتاح", "هاتف", "شاشة", "كتاب", "قلم", "مكتب", "كرسي", "شجرة", "وردة", "شمس", "بيت", "ثلج", "برمجة"];
        
        function initGame() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            scoreA = 0; scoreB = 0;
            updateScore();
            
            let deck = words.sort(() => 0.5 - Math.random());
            
            for (let i = 0; i < 25; i++) {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerText = deck[i];
                
                // توزيع الأدوار (9 للفريق A، 8 للفريق B، 1 قاتلة، الباقي محايد)
                if (i < 9) card.dataset.type = 'team1';
                else if (i < 17) card.dataset.type = 'team2';
                else if (i === 17) card.dataset.type = 'killer';
                else card.dataset.type = 'neutral';

                card.onclick = () => selectCard(card);
                board.appendChild(card);
            }
            // خلط أماكن الكروت
            let cards = Array.from(board.children);
            cards.sort(() => 0.5 - Math.random()).forEach(c => board.appendChild(c));
        }

        function selectCard(card) {
            if (card.classList.contains('revealed')) return;
            
            card.classList.add('revealed');
            if (card.dataset.type === 'team1') {
                card.classList.add('revealed-t1');
                scoreA++;
            } else if (card.dataset.type === 'team2') {
                card.classList.add('revealed-t2');
                scoreB++;
            } else if (card.dataset.type === 'killer') {
                card.classList.add('revealed-kill');
                alert("انتهت اللعبة! ضربتم الكلمة القاتلة.");
            }
            updateScore();
        }

        function toggleSpy() {
            isSpyView = !isSpyView;
            document.querySelectorAll('.card').forEach(card => {
                if (isSpyView) {
                    if (card.dataset.type === 'team1') card.classList.add('team1');
                    if (card.dataset.type === 'team2') card.classList.add('team2');
                    if (card.dataset.type === 'killer') card.classList.add('killer');
                } else {
                    card.classList.remove('team1', 'team2', 'killer');
                }
            });
        }

        function updateScore() {
            document.getElementById('scoreA').innerText = scoreA;
            document.getElementById('scoreB').innerText = scoreB;
        }

        initGame();
    </script>
</body>
</html>
